window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(a){return function(){var b=Array.prototype.slice.call(arguments);return b.unshift(a),window.analytics.push(b),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(a){if(!document.getElementById("analytics-js")){var b=document.createElement("script");b.type="text/javascript",b.id="analytics-js",b.async=!0,b.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+a+"/analytics.min.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}},window.analytics.SNIPPET_VERSION="2.0.9",function(a,b){var c=function(){if(!analytics)throw new Error('The "analytics" object could not be found. Check if the segment.io library was installed correctly.')};c.prototype.load=function(a,c,d,e){if(a&&a.length)analytics.load(a),analytics.ready(function(){c=c||{};var a=analytics.user();if(!a||!a.id()){var f=c.distinct_id||c.id;f?(d&&analytics.alias(f),analytics.identify(f,c)):analytics.identify(c)}e&&b(function(){e()})});else{var f=function(){},g=analytics.methods;for(var h in g){var i=g[h];analytics[i]=f}}},c.prototype._getProperties=function(a){var b={},c=a.data();for(var d in c)"metric"!==d&&0===d.indexOf("metric")&&(b[this._convertPropertyName(d)]=this._convertProperty(c[d]));return b},c.prototype._convertPropertyName=function(a){var b="metric".length;return a.charAt(b).toLowerCase()+a.slice(b+1)},c.prototype._convertProperty=function(a){var b=a;if(a)if("true"===a)b=!0;else if("false"===a)b=!1;else{var c=parseFloat(a);isNaN(c)||(b=c)}return b},c.prototype.triggerMetric=function(a){var b=this._getProperties(a);analytics.track(metricName,b)},c.prototype.bindMetric=function(a){var b=a.get(0).tagName.toLowerCase(),c=a.data("metric"),d=this._getProperties(a);switch(b){case"a":analytics.trackLink(a,c,d);break;case"form":analytics.trackForm(a,c,d);break;case"button":a.click(function(){analytics.track(c,d)});break;default:if(d.pageView===!0)analytics.page(c,d.pageCategory,d);else{var e=d.event;e&&a.on(e,function(a){d.eventType=a.type,analytics.track(c,d)})}}},a.analysjs=new c}(this,this.jQuery||this.ender),function(a,b){b.fn.triggerMetric=function(c){return b(this).each(function(){var d=b(this),e=d.data("metric");if(!e)throw new Error("This element does not support metric triggering. You must provide a valid data-metric attribute.");c=b.extend(getProperties(d),c),a.analysjs.triggerMetric(e,c)})},b(function(){b("[data-metric]").each(function(){var c=b(this),d=c.data("metric");d&&a.analysjs.bindMetric(c)})})}(this,this.jQuery||this.ender);
//# sourceMappingURL=https://raw.github.com/vendji/analysjs/master/build/analysjs.js.map